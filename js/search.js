var searchFunc=function(e,r,c){"use strict";fetch(e).then(e=>{return Promise.resolve(e.json())}).then(i=>{var u=document.getElementById(r);var s;u.addEventListener("input",()=>{var e=document.getElementById(c);e.innerHTML="";var r=u.value;if(r.trim().length<=0){return}var t=r.trim().toLowerCase().split(/[\s\-]+/);var n=searchInternel(i,t);s=n;resultSort(n,t);var a=buildHtml(n,t);e.innerHTML=a})})};var searchInternel=function(e,r){matched=[];e.forEach(function(e){if(matchKeywords(e,r)){matched.push(e)}});return matched};var matchKeywords=function(e,r){var{title:t,tags:n,categories:a}=e;for(var i=0;i<r.length;i++){if(t.toLowerCase().indexOf(r[i])!==-1){continue}if(n&&matchList(n,r[i])){continue}if(a&&matchList(a,r[i])){continue}return false}return true};var matchList=function(e,r){for(var t=0;t<e.length;t++){if(e[t].toLowerCase().indexOf(r)!==-1){return true}}return false};var resultSort=function(e,r){e.sort((e,r)=>{return e.date<r.date})};var computeScore=function(e,r){var{title:t,tags:n,categories:a}=e;var i=function(e){return e.map(e=>{return e[1]-e[0]}).reduce((e,r)=>e+r,0)};var u=computeRanges(t,r);var s=i(u);if(a&&a.length>0){s+=2*a.map(e=>{return i(computeRanges(e,r))}).reduce((e,r)=>e+r,0)}if(n&&n.length>0){s+=2*n.map(e=>{return i(computeRanges(e,r))}).reduce((e,r)=>e+r,0)}return s};var computeRanges=function(t,e){indexes=[];e.forEach(r=>{var e=searchAllSubStr(t,r);e.forEach(e=>{indexes.push([e,e+r.length])})});return combine(indexes)};var buildHtml=function(e,r){var t='<ul class="search-result-list">';e.forEach(e=>{t+='<li><a href="'+e.url+'" class="search-result-title">'+buildTitleHtml(e,r)+"</a>  "+buildMetaHtml(e,r)+"</li>"});t+="</ul>";return t};var buildTitleHtml=function(e,r){return replaceKeywords(e.title,r)};var buildMetaHtml=function(e,r){var t="";if(e.categories&&e.categories.length>0){t+="  ["+e.categories.map(e=>{return replaceKeywords(e,r)}).join(",")+"]"}if(e.tags&&e.tags.length>0){t+="  ["+e.tags.map(e=>{return replaceKeywords(e,r)}).join(",")+"]"}t+=' <span class="search-result-item-meta-time">'+e.date+"</span>";return t};var replaceKeywords=function(e,r){var s=e;var t=computeRanges(e,r);n=0;idx=0;t.forEach(e=>{var r=s.substring(e[0]+n,e[1]+n);var t=keywordSeg(r);var a=t.length-r.length;var i=s.substring(0,idx);var u=s.substring(idx).replace(r,t);s=i+u;n+=a;idx=n+e[1]});return s};var keywordSeg=function(e){return'<span class="search-keyword">'+e+"</span>"};var searchAllSubStr=function(e,r){e=e.toLowerCase();var t=[];var n=e.indexOf(r);while(n>-1){t.push(n);n=e.indexOf(r,n+1)}return t};var combine=function(e){e.sort((e,r)=>{return e[0]-r[0]});var t=[];e.forEach(e=>{if(t.length===0){t.push(e)}else{var r=t[t.length-1];if(e[0]<=[1]){r[1]=Math.max(e[1],r[1])}else{t.push(e)}}});return t};