<!DOCTYPE html><html><head><meta charset="utf-8"><title>Python入门 | 曹耘豪的博客</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="alternate" href="/atom.xml" title="曹耘豪的博客" type="application/atom+xml"><link rel="icon" href="https://s1.ax1x.com/2018/06/09/CbgQqs.png"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="header2" style="border-bottom:1px solid #ccc"><input type="checkbox" id="header-menu-input"><h1 style="text-align:left"><a href="/">曹耘豪的博客</a> <label for="header-menu-input"><svg class="op open" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24" height="24" viewBox="0 0 50 50" fill="currentcolor" stroke="currentcolor"><path d="M 0 7.5 L 0 12.5 L 50 12.5 L 50 7.5 Z M 0 22.5 L 0 27.5 L 50 27.5 L 50 22.5 Z M 0 37.5 L 0 42.5 L 50 42.5 L 50 37.5 Z"></path></svg> <svg class="close" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24" height="24" viewBox="0 0 30 30" style="fill:red"><path d="M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"></path></svg></label> <input disabled id="local-search-input" class="input-text" type="search" placeholder="js未开启，无法搜索" aria-label="Search"></h1><div id="local-search-result"></div><div class="header-menu" for="header-menu-input"><aside id="sidebar"><div><div class="widget-wrap widget-category"><h3 class="widget-title">目录</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/category/other/">其他</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/">技术</a><span class="category-list-count">137</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/category/technology/cpp/">C++</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/Go/">Go</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/java/">Java</a><span class="category-list-count">59</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/python/">Python</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/Rust/">Rust</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/%E5%89%8D%E7%AB%AF/">前端</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/machine-learning/">机器学习</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/computer-network/">计算机网络</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/design-pattern/">设计模式</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/%E8%AF%B4%E8%AF%B4/">说说</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/%E8%BF%90%E7%BB%B4/">运维</a><span class="category-list-count">13</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/category/algorithm/">算法</a><span class="category-list-count">8</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">标签</h3><div class="widget"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">MySQL</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Protobuf/" rel="tag">Protobuf</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud/" rel="tag">Spring Cloud</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Feign/" rel="tag">Feign</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a><span class="tag-list-count">21</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/" rel="tag">问题排查</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nextjs/" rel="tag">Nextjs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">Spring</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/" rel="tag">JVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%90%86/" rel="tag">代理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/" rel="tag">Kafka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gradle/" rel="tag">Gradle</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/" rel="tag">Maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fastjson/" rel="tag">fastjson</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/" rel="tag">node</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%93%E5%AD%98/" rel="tag">缓存</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mybatis/" rel="tag">Mybatis</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hive/" rel="tag">Hive</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag">测试</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HBase/" rel="tag">HBase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91/" rel="tag">并发</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">响应式编程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">其他</h3><div class="widget"><a href="/atom.xml">RSS Feed </a><a href="/resume" style="margin-left:8px">Resume</a></div></div></div></aside></div><script src="/js/search.js"></script><script type="text/javascript">(()=>{var e="local-search-input",a=(($input=document.getElementById(e)).disabled=!1,$input.placeholder="全站本地搜索","search.json"),a="/"+(a=0===a.length?"search.json":a);searchFunc(a,e,"local-search-result")})()</script></div><article id="post-23eeeb43" class="article article-type-post" itemscope itemprop="blogPost" style="position:relative"><header><h1 class="article-title" itemprop="name">Python入门</h1></header><div class="secondary-bg" style="border:1px solid gray;border-radius:4px"><ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Python%E5%AE%89%E8%A3%85"><span class="toc-nav-text">Python安装</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-nav-text">生成器</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%88%97%E8%A1%A8%E7%94%9F%E6%88%90%E5%BC%8F"><span class="toc-nav-text">列表生成式</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%AD%97%E5%85%B8%E7%94%9F%E6%88%90%E5%BC%8F"><span class="toc-nav-text">字典生成式</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%94%9F%E6%88%90%E5%99%A8-1"><span class="toc-nav-text">生成器</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%AE%9A%E5%88%B6Python%E7%9A%84%E7%B1%BB"><span class="toc-nav-text">定制Python的类</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#def-iter-self"><span class="toc-nav-text">def __iter__(self)</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#def-next-self"><span class="toc-nav-text">def __next__(self)</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#def-contains-self-item"><span class="toc-nav-text">def __contains__(self, item)</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#def-bool-self"><span class="toc-nav-text">def __bool__(self)</span></a></li></ol></li></ol><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%BD%BF%E7%94%A8decimal%E8%AE%A1%E7%AE%97%E9%87%91%E9%A2%9D"><span class="toc-nav-text">使用decimal计算金额</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98"><span class="toc-nav-text">相关问题</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#py%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E5%AD%98%E5%9C%A8%E7%A9%BA%E6%A0%BC"><span class="toc-nav-text">py文件路径存在空格</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#json-loads%E6%8A%A5%E9%94%99"><span class="toc-nav-text">json.loads报错</span></a></li></ol></li></div><h2 id="Python安装"><a href="#Python安装" class="headerlink" title="Python安装"></a>Python安装</h2><blockquote><p>2024-04-29</p></blockquote><p>安装包下载: <a href="https://mirrors.huaweicloud.com/python">https://mirrors.huaweicloud.com/python</a></p><h2 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h2><h3 id="列表生成式"><a href="#列表生成式" class="headerlink" title="列表生成式"></a>列表生成式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># [0, 1, 2, 3, 4]</span></span><br><span class="line">list1 = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">5</span>)]</span><br><span class="line"><span class="comment"># [0, 1, 4, 9, 16]</span></span><br><span class="line">list2 = [i*i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">5</span>)]</span><br><span class="line"><span class="comment"># [0, 1, 4]</span></span><br><span class="line">list2 = [i*i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">5</span>) <span class="keyword">if</span> i &lt; <span class="number">3</span>]</span><br></pre></td></tr></table></figure><h3 id="字典生成式"><a href="#字典生成式" class="headerlink" title="字典生成式"></a>字典生成式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#123;&#x27;a&#x27;, 1&#125;</span></span><br><span class="line"><span class="built_in">dict</span> <span class="number">1</span> = &#123;k, v <span class="keyword">for</span> k, v <span class="keyword">in</span> &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>&#125;.items()&#125;</span><br></pre></td></tr></table></figure><h3 id="生成器-1"><a href="#生成器-1" class="headerlink" title="生成器"></a>生成器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &lt;generator object &lt;genexpr&gt; at 0x103acb2b0&gt;</span></span><br><span class="line">gen1 = (i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要注意，生成器只能遍历一遍</span></span><br><span class="line"><span class="built_in">list</span>(gen1) <span class="comment"># [0, 1, 2, 3, 4]</span></span><br><span class="line"><span class="built_in">list</span>(gen1) <span class="comment"># []</span></span><br></pre></td></tr></table></figure><h2 id="定制Python的类"><a href="#定制Python的类" class="headerlink" title="定制Python的类"></a>定制Python的类</h2><blockquote><p>2018-04-08</p></blockquote><p>假设类++实例++为<code>my_class</code>，即<code>my_class = MyClass()</code></p><h5 id="def-iter-self"><a href="#def-iter-self" class="headerlink" title="def __iter__(self)"></a><code>def __iter__(self)</code></h5><p>被<code>itor()</code>调用，返回类的迭代器版本用于迭代, 通常使用于<code>for</code>语句等</p><span id="more"></span><h5 id="def-next-self"><a href="#def-next-self" class="headerlink" title="def __next__(self)"></a><code>def __next__(self)</code></h5><p>获取下一个元素</p><p>在作为迭代器时的<code>iterable</code>接口，若无则会报错</p><p><code>TypeError: &#39;xx&#39; object is not iterable</code></p><p>在与<code>for</code>语句联合使用时，同时要实现<code>def __iter__(self)</code>以返回迭代器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> my_class:</span><br><span class="line">    <span class="comment"># do something</span></span><br></pre></td></tr></table></figure><h5 id="def-contains-self-item"><a href="#def-contains-self-item" class="headerlink" title="def __contains__(self, item)"></a><code>def __contains__(self, item)</code></h5><p>返回<code>True</code>或<code>False</code>: 是否存在<code>item</code></p><p>使用方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> item <span class="keyword">in</span> my_class:</span><br><span class="line">    <span class="comment"># do something</span></span><br></pre></td></tr></table></figure><h5 id="def-bool-self"><a href="#def-bool-self" class="headerlink" title="def __bool__(self)"></a><code>def __bool__(self)</code></h5><p>返回返回实体类的布尔属性<code>True</code>或<code>False</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> my_class:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;True&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;False&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="使用decimal计算金额"><a href="#使用decimal计算金额" class="headerlink" title="使用decimal计算金额"></a>使用decimal计算金额</h2><blockquote><p>2024-11-17<br>在线运行： <a href="https://www.online-python.com/">https://www.online-python.com/</a></p></blockquote><p>float不精准</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; int(<span class="built_in">float</span>(<span class="string">&#x27;34.61&#x27;</span>) * 100)</span><br><span class="line">3461</span><br><span class="line">&gt;&gt;&gt; int(<span class="built_in">float</span>(<span class="string">&#x27;34.62&#x27;</span>) * 100)</span><br><span class="line">3461</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">float</span>(<span class="string">&#x27;34.62&#x27;</span>) * 100</span><br><span class="line">3461.9999999999995</span><br></pre></td></tr></table></figure><p>使用decimal</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import decimal</span><br><span class="line">&gt;&gt;&gt; int(decimal.Decimal(<span class="string">&#x27;34.62&#x27;</span>) * 100)</span><br><span class="line">3462</span><br></pre></td></tr></table></figure><h2 id="相关问题"><a href="#相关问题" class="headerlink" title="相关问题"></a>相关问题</h2><h3 id="py文件路径存在空格"><a href="#py文件路径存在空格" class="headerlink" title="py文件路径存在空格"></a>py文件路径存在空格</h3><blockquote><p>2018-12-11</p></blockquote><p>当文件或文件夹存在空格时，<code>python xxx/xxx.py</code>命令找不到对应的文件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">path=/Users/root/script/python\ script/demo.py</span><br><span class="line">python <span class="variable">$path</span></span><br><span class="line"><span class="comment"># 找不到文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 相当于</span></span><br><span class="line">python /Users/root/script/python script/demo.py</span><br><span class="line"><span class="comment"># 将/Users/root/script/python当作了文件，把script/demo.py当作了第二个参数</span></span><br></pre></td></tr></table></figure><p>解决方案</p><p>使用 <code>python &quot;xxx.py&quot;</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">path=<span class="string">&#x27;/Users/root/script/python script/demo.py&#x27;</span></span><br><span class="line">python <span class="string">&quot;<span class="variable">$path</span>&quot;</span></span><br><span class="line"><span class="comment"># 相当于</span></span><br><span class="line">python <span class="string">&quot;/Users/root/script/python script/demo.py&quot;</span></span><br></pre></td></tr></table></figure><h3 id="json-loads报错"><a href="#json-loads报错" class="headerlink" title="json.loads报错"></a><code>json.loads</code>报错</h3><blockquote><p>2022-10-12</p></blockquote><p>这个json应该是控制台打印出来的或者浏览器显示的的，所以如果value有<code>&quot;</code>引号时，输出时会添加转义符。如：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="string">&quot;\&quot;value\&quot;&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>上述json复制到网站格式化是正常的，但如果<strong>直接粘贴到代码里</strong>就会有报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import json</span><br><span class="line">&gt;&gt;&gt; json.loads(&#x27;&#123;&quot;key&quot;:&quot;\&quot;value\&quot;&quot;&#125;&#x27;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">  File &quot;/usr/local/Cellar/python@3.9/3.9.12/Frameworks/Python.framework/Versions/3.9/lib/python3.9/json/__init__.py&quot;, line 346, in loads</span><br><span class="line">    return _default_decoder.decode(s)</span><br><span class="line">  File &quot;/usr/local/Cellar/python@3.9/3.9.12/Frameworks/Python.framework/Versions/3.9/lib/python3.9/json/decoder.py&quot;, line 337, in decode</span><br><span class="line">    obj, end = self.raw_decode(s, idx=_w(s, 0).end())</span><br><span class="line">  File &quot;/usr/local/Cellar/python@3.9/3.9.12/Frameworks/Python.framework/Versions/3.9/lib/python3.9/json/decoder.py&quot;, line 353, in raw_decode</span><br><span class="line">    obj, end = self.scan_once(s, idx)</span><br><span class="line">json.decoder.JSONDecodeError: Expecting &#x27;,&#x27; delimiter: line 1 column 10 (char 9)</span><br></pre></td></tr></table></figure><p>是因为此时的<code>\</code>是转义符，相当于输入了<code>&#123;&quot;key&quot;:&quot;&quot;value&quot;&quot;&#125;</code>，自然是个不合法json。我们需要的是json里的转义符而不是python字符串的转义符，所以再添加一个<code>\</code>，如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import json</span><br><span class="line">&gt;&gt;&gt; json.loads(&#x27;&#123;&quot;key&quot;:&quot;\\&quot;value\\&quot;&quot;&#125;&#x27;)</span><br><span class="line">&#123;&#x27;key&#x27;: &#x27;&quot;value&quot;&#x27;&#125;</span><br></pre></td></tr></table></figure><p>这样就可以了。但如果json很大，手动逐个添加<code>\</code>并不现实，字符串替换也不方便，我们可以在字符串前加<code>r</code>，使用<strong>原始字符串文本</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import json</span><br><span class="line">&gt;&gt;&gt; json.loads(r&#x27;&#123;&quot;key&quot;:&quot;\&quot;value\&quot;&quot;&#125;&#x27;)</span><br><span class="line">&#123;&#x27;key&#x27;: &#x27;&quot;value&quot;&#x27;&#125;</span><br></pre></td></tr></table></figure><p>也可以先把源json写到文件里，再读，因为文件里的<code>\</code>就不再是转义符了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import json</span><br><span class="line">&gt;&gt;&gt; with open(&#x27;data.txt&#x27;) as f:</span><br><span class="line">...   json.load(f)</span><br><span class="line">... </span><br><span class="line">&#123;&#x27;key&#x27;: &#x27;&quot;value&quot;&#x27;&#125;</span><br><span class="line"></span><br><span class="line">➜ cat data.txt </span><br><span class="line">&#123;&quot;key&quot;:&quot;\&quot;value\&quot;&quot;&#125;</span><br></pre></td></tr></table></figure><p>参考：</p><ul><li><a href="https://www.likecs.com/show-306870527.html">https://www.likecs.com/show-306870527.html</a></li><li><a href="https://www.codingdict.com/questions/89588">https://www.codingdict.com/questions/89588</a></li></ul><div style="border-top:2px solid #eee;height:1px;margin:8px 0"></div><div class="article-category"><svg class="i-tag" width="16px" height="16px" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.41959 3.23866C6.23018 3.05852 7.19557 3 8.312 3H9.92963C10.9327 3 11.8694 3.5013 12.4258 4.3359L13.2383 5.5547C13.4238 5.83288 13.736 6 14.0704 6H19.1258C20.7233 6 22.0181 7.26115 22.0029 8.8852C21.9847 10.8192 22 12.7539 22 14.688C22 15.8044 21.9415 16.7698 21.7613 17.5804C21.5787 18.4024 21.2579 19.1251 20.6915 19.6915C20.1251 20.2579 19.4024 20.5787 18.5804 20.7613C17.7698 20.9415 16.8044 21 15.688 21H8.312C7.19557 21 6.23018 20.9415 5.41959 20.7613C4.59764 20.5787 3.87488 20.2579 3.30848 19.6915C2.74209 19.1251 2.42133 18.4024 2.23866 17.5804C2.05852 16.7698 2 15.8044 2 14.688V9.312C2 8.19557 2.05852 7.23018 2.23866 6.41959C2.42133 5.59764 2.74209 4.87488 3.30848 4.30848C3.87488 3.74209 4.59764 3.42133 5.41959 3.23866ZM8.19103 13.8535C8.05868 14.449 8 15.2412 8 16.312V18C8 18.5523 7.55228 19 7 19C6.44772 19 6 18.5523 6 18V16.312C6 15.1956 6.05852 14.2302 6.23866 13.4196C6.42133 12.5976 6.74209 11.8749 7.30848 11.3085C7.87488 10.7421 8.59764 10.4213 9.41959 10.2387C10.2302 10.0585 11.1956 10 12.312 10H17.688H19C19.5523 10 20 10.4477 20 11C20 11.5523 19.5523 12 19 12H17.688H12.312C11.2412 12 10.449 12.0587 9.85349 12.191C9.26933 12.3209 8.9375 12.5079 8.72269 12.7227C8.50789 12.9375 8.32085 13.2693 8.19103 13.8535Z"/></svg> &nbsp; <a class="article-category-link" href="/category/technology/">技术</a>&nbsp;/&nbsp;<a class="article-category-link" href="/category/technology/python/">Python</a></div><div class="article-date"><time datetime="2018-04-07T16:00:00.000Z" itemprop="datePublished">2018-04-08</time></div></article></body></html>