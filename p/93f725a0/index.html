<!DOCTYPE html><html><head><meta charset="utf-8"><title>Java入门 | 曹耘豪的博客</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="alternate" href="/atom.xml" title="曹耘豪的博客" type="application/atom+xml"><link rel="icon" href="https://s1.ax1x.com/2018/06/09/CbgQqs.png"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="header2" style="border-bottom:1px solid #ccc"><input type="checkbox" id="header-menu-input"><h1 style="text-align:left"><a href="/">曹耘豪的博客</a> <label for="header-menu-input"><svg class="op open" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24" height="24" viewBox="0 0 50 50" fill="currentcolor" stroke="currentcolor"><path d="M 0 7.5 L 0 12.5 L 50 12.5 L 50 7.5 Z M 0 22.5 L 0 27.5 L 50 27.5 L 50 22.5 Z M 0 37.5 L 0 42.5 L 50 42.5 L 50 37.5 Z"></path></svg> <svg class="close" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24" height="24" viewBox="0 0 30 30" style="fill:red"><path d="M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"></path></svg></label> <input disabled id="local-search-input" class="input-text" type="search" placeholder="js未开启，无法搜索" aria-label="Search"></h1><div id="local-search-result"></div><div class="header-menu" for="header-menu-input"><aside id="sidebar"><div><div class="widget-wrap widget-category"><h3 class="widget-title">目录</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/category/other/">其他</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/">技术</a><span class="category-list-count">137</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/category/technology/cpp/">C++</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/Go/">Go</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/java/">Java</a><span class="category-list-count">59</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/python/">Python</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/Rust/">Rust</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/%E5%89%8D%E7%AB%AF/">前端</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/machine-learning/">机器学习</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/computer-network/">计算机网络</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/design-pattern/">设计模式</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/%E8%AF%B4%E8%AF%B4/">说说</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/category/technology/%E8%BF%90%E7%BB%B4/">运维</a><span class="category-list-count">13</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/category/algorithm/">算法</a><span class="category-list-count">8</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">标签</h3><div class="widget"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">MySQL</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Protobuf/" rel="tag">Protobuf</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud/" rel="tag">Spring Cloud</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Feign/" rel="tag">Feign</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a><span class="tag-list-count">21</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/" rel="tag">问题排查</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nextjs/" rel="tag">Nextjs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">Spring</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/" rel="tag">JVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%90%86/" rel="tag">代理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/" rel="tag">Kafka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gradle/" rel="tag">Gradle</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/" rel="tag">Maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fastjson/" rel="tag">fastjson</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/" rel="tag">node</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%93%E5%AD%98/" rel="tag">缓存</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mybatis/" rel="tag">Mybatis</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hive/" rel="tag">Hive</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag">测试</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HBase/" rel="tag">HBase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91/" rel="tag">并发</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">响应式编程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">其他</h3><div class="widget"><a href="/atom.xml">RSS Feed </a><a href="/resume" style="margin-left:8px">Resume</a></div></div></div></aside></div><script src="/js/search.js"></script><script type="text/javascript">(()=>{var e="local-search-input",a=(($input=document.getElementById(e)).disabled=!1,$input.placeholder="全站本地搜索","search.json"),a="/"+(a=0===a.length?"search.json":a);searchFunc(a,e,"local-search-result")})()</script></div><article id="post-93f725a0" class="article article-type-post" itemscope itemprop="blogPost" style="position:relative"><header><h1 class="article-title" itemprop="name">Java入门</h1></header><div class="secondary-bg" style="border:1px solid gray;border-radius:4px"><ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%BA%8C%E3%80%81%E5%85%AB%E3%80%81%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6"><span class="toc-nav-text">二、八、十六进制</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95"><span class="toc-nav-text">表示方法</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%BD%AC%E4%B8%BA%E5%AF%B9%E5%BA%94String"><span class="toc-nav-text">转为对应String</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E4%BB%8EString%E8%BD%AC%E4%B8%BA%E5%AF%B9%E5%BA%94Int"><span class="toc-nav-text">从String转为对应Int</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#String%E5%8A%A0%E6%B3%95"><span class="toc-nav-text">String加法</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#StringBuilder"><span class="toc-nav-text">StringBuilder</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#StringBuffer"><span class="toc-nav-text">StringBuffer</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#StringBuilder-%E5%92%8C-StringBuffer-%E6%AF%94%E8%BE%83"><span class="toc-nav-text">StringBuilder 和 StringBuffer 比较</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8-%E5%90%97%EF%BC%9F"><span class="toc-nav-text">可以直接使用&quot;+&quot;吗？</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%85%B6%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B"><span class="toc-nav-text">基本类型及其数组类型</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%8F%8D%E5%B0%84"><span class="toc-nav-text">反射</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%AE%BF%E9%97%AE%E7%A7%81%E6%9C%89%E5%AD%97%E6%AE%B5"><span class="toc-nav-text">访问私有字段</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%AE%BF%E9%97%AE%E7%A7%81%E6%9C%89%E6%96%B9%E6%B3%95"><span class="toc-nav-text">访问私有方法</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%AE%BF%E9%97%AE%E9%9D%99%E6%80%81%E7%A7%81%E6%9C%89%E6%96%B9%E6%B3%95"><span class="toc-nav-text">访问静态私有方法</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Java%E9%9B%86%E5%90%88"><span class="toc-nav-text">Java集合</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Queue"><span class="toc-nav-text">Queue</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%8D%95%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0"><span class="toc-nav-text">单线程实现</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0"><span class="toc-nav-text">多线程实现</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Deque"><span class="toc-nav-text">Deque</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%8D%95%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0-1"><span class="toc-nav-text">单线程实现</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0-1"><span class="toc-nav-text">多线程实现</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#SortedMap-NavigableMap"><span class="toc-nav-text">SortedMap &#x2F; NavigableMap</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%8D%95%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0-2"><span class="toc-nav-text">单线程实现</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0-2"><span class="toc-nav-text">多线程实现</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#SortedSet-NavigableSet"><span class="toc-nav-text">SortedSet &#x2F; NavigableSet</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#ArrayList%E5%92%8CLinkedList%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-nav-text">ArrayList和LinkedList的原理和使用场景</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#ArrayList"><span class="toc-nav-text">ArrayList</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#LinkedList"><span class="toc-nav-text">LinkedList</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%AE%9E%E7%8E%B0%E5%92%8C%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%AF%B9%E6%AF%94"><span class="toc-nav-text">实现和复杂度对比</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E6%95%B0%E5%AD%97%E7%9A%84%E5%A4%A7%E5%B0%8F%E6%AF%94%E8%BE%83"><span class="toc-nav-text">数字的大小比较</span></a></li></ol></div><h2 id="二、八、十六进制"><a href="#二、八、十六进制" class="headerlink" title="二、八、十六进制"></a>二、八、十六进制</h2><blockquote><p>2018-09-18</p></blockquote><h3 id="表示方法"><a href="#表示方法" class="headerlink" title="表示方法"></a>表示方法</h3><ul><li>2进制 (<code>0b</code>开头)：<code>0b101</code>表示十进制的<code>5</code></li><li>8进制 (<code>0</code>开头)：<code>011</code>表示十进制的<code>9</code></li><li>16进制 (<code>0x</code>开头)：<code>0x11</code>表示十进制的<code>17</code></li></ul><h3 id="转为对应String"><a href="#转为对应String" class="headerlink" title="转为对应String"></a>转为对应String</h3><ul><li>2进制: Integer.toBinaryString(int i)</li><li>8进制: Integer.toOctalString(int i)</li><li>16进制: Integer.toHexString(int i)</li><li>n进制: Integer.toString(int i, int radix)</li></ul><h3 id="从String转为对应Int"><a href="#从String转为对应Int" class="headerlink" title="从String转为对应Int"></a>从String转为对应Int</h3><p>支持2~36进制，10个数字+26个字母</p><ul><li>10进制: Integer.valueOf(i)</li><li>2进制: Integer.valueOf(i, 2)</li><li>8进制: Integer.valueOf(i, 8)</li><li>16进制: Integer.valueOf(i, 16)</li><li>n进制: Integer.valueOf(i, n)</li></ul><h2 id="String加法"><a href="#String加法" class="headerlink" title="String加法"></a>String加法</h2><blockquote><p>2018-09-16</p></blockquote><p>在我们编写Java代码过程中，经常有拼接字符串的需求，通常有三种方法：</p><ul><li>直接使用<code>&quot;+&quot;</code>操作</li><li>使用<code>StringBuilder</code></li><li>使用<code>StringBuffer</code></li></ul><span id="more"></span><blockquote><p>首先介绍一下<code>StringBuilder</code></p></blockquote><h3 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a><code>StringBuilder</code></h3><p>先看一下如何使用<code>StringBuilder</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">sb.append(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">sb.append(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">sb.toString(); <span class="comment">// &quot;ab&quot;</span></span><br></pre></td></tr></table></figure><p>通过<code>append</code>操作拼接字符串，最后通过<code>toString</code>方法得到最终的字符串。</p><h3 id="StringBuffer"><a href="#StringBuffer" class="headerlink" title="StringBuffer"></a><code>StringBuffer</code></h3><p><code>StringBuffer</code>和<code>StringBuilder</code>的使用方法差不多。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">sb.append(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">sb.append(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">sb.toString(); <span class="comment">// &quot;ab&quot;</span></span><br></pre></td></tr></table></figure><p>既然差不多，为什么还要另搞一个<code>StringBuffer</code>呢？查看源码可以看到，<code>StringBuffer</code>的操作都是有<code>synchronized</code>关键字的，也就是说是线程安全的。</p><h3 id="StringBuilder-和-StringBuffer-比较"><a href="#StringBuilder-和-StringBuffer-比较" class="headerlink" title="StringBuilder 和 StringBuffer 比较"></a>StringBuilder 和 StringBuffer 比较</h3><p>所以我们可以总结，</p><ul><li>当为单线程时，直接使用<code>StringBuilder</code>，比<code>StringBuffer</code>要快，免去加锁操作。</li><li>对于多线程，我们可以使用<code>StringBuffer</code>保证线程安全。</li></ul><h3 id="可以直接使用-吗？"><a href="#可以直接使用-吗？" class="headerlink" title="可以直接使用&quot;+&quot;吗？"></a>可以直接使用<code>&quot;+&quot;</code>吗？</h3><p>当然可以，不然发明它干吗～～</p><p>假如，我们编写以下程序，直接相加2个字符串</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">ret</span> <span class="operator">=</span> str1 + str2;</span><br></pre></td></tr></table></figure><p>build后查看class文件，发现是这样的:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">ret</span> <span class="operator">=</span> (<span class="keyword">new</span> <span class="title class_">StringBuilder</span>()).append(str1).append(str2).toString())</span><br></pre></td></tr></table></figure><p>也就是说，如果直接采用<code>+</code>进行字符串的合并，编译器会将其转为<code>StringBuilder</code>，所以放心使用String的加法吧～</p><p>只是</p><p>如果你要写下面的代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (String str: strs) &#123;</span><br><span class="line">    ret += str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>看看build后的结果</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (String str: strs) &#123;</span><br><span class="line">    ret = (<span class="keyword">new</span> <span class="title class_">StringBuilder</span>()).append(ret).append(str).toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>显然，这将会产生n多个StringBuilder，大大增加了gc开销，这个时候，<code>StringBuilder</code>和<code>StringBuffer</code>便派上用场了，所以，知道该怎么做了吗。</p><h2 id="基本类型及其数组类型"><a href="#基本类型及其数组类型" class="headerlink" title="基本类型及其数组类型"></a>基本类型及其数组类型</h2><blockquote><p>2019-03-12</p></blockquote><table><thead><tr><th>基本类型</th><th>class名(&#x3D;本身)</th><th>对应数组class名</th></tr></thead><tbody><tr><td><code>byte</code></td><td><code>byte</code></td><td><code>[B</code></td></tr><tr><td><code>int</code></td><td><code>int</code></td><td><code>[i</code></td></tr><tr><td><code>long</code></td><td><code>long</code></td><td><code>[J</code></td></tr><tr><td><code>float</code></td><td><code>float</code></td><td><code>[F</code></td></tr><tr><td><code>double</code></td><td><code>double</code></td><td><code>[D</code></td></tr><tr><td><code>boolean</code></td><td><code>boolean</code></td><td><code>[z</code></td></tr></tbody></table><!-- more --><p>下面以<code>byte</code>为例说明这个问题</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="type">byte</span>.class.getName()); <span class="comment">// byte</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// throw exception: java.lang.ClassNotFoundException: byte</span></span><br><span class="line">System.out.println(Class.forName(<span class="string">&quot;byte&quot;</span>).getName());</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="type">byte</span>[].class.getName()); <span class="comment">// [B</span></span><br><span class="line"></span><br><span class="line">System.out.println(Class.forName(<span class="string">&quot;[B&quot;</span>).getName()); <span class="comment">// [B</span></span><br></pre></td></tr></table></figure><h2 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h2><blockquote><p>2019-04-09<br>有时，现有的类库接口不能满足我们的需求（它们往往封装的过好，隐藏了内部细节，以至于把这些细节都设为了private方法）。我们确实需要主动执行这些内部方法，以达到某种目的。大多数时候，这种需求会添加在该库的未来的版本中，但我们由于各种各样的原因不能升级，需要在当前版本满足我们的需求，问题来了，如何主动执行受保护的方法，答案是，反射。</p></blockquote><p>有以下类<code>A</code>，我们要在外部访问它的 private 字段，执行它的 private 方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">intValue</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">strValue</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">A</span><span class="params">(<span class="type">int</span> intValue)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.intValue = intValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getIntValue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> intValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> A <span class="title function_">of</span><span class="params">(<span class="type">int</span> intValue)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">A</span>(intValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="访问私有字段"><a href="#访问私有字段" class="headerlink" title="访问私有字段"></a>访问私有字段</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>(<span class="number">1</span>);</span><br><span class="line"><span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> A.class.getDeclaredField(<span class="string">&quot;intValue&quot;</span>);</span><br><span class="line">field.setAccessible(<span class="literal">true</span>); <span class="comment">// 关键！</span></span><br><span class="line"><span class="type">int</span> <span class="variable">fieldValue</span> <span class="operator">=</span> (<span class="type">int</span>) field.get(a);</span><br><span class="line">System.out.println(fieldValue); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h3 id="访问私有方法"><a href="#访问私有方法" class="headerlink" title="访问私有方法"></a>访问私有方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>(<span class="number">1</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">getIntValueMethod</span> <span class="operator">=</span> A.class.getDeclaredMethod(<span class="string">&quot;getIntValue&quot;</span>);</span><br><span class="line">getIntValueMethod.setAccessible(<span class="literal">true</span>); <span class="comment">// 关键！</span></span><br><span class="line"><span class="type">int</span> <span class="variable">intValue</span> <span class="operator">=</span> (<span class="type">int</span>) getIntValueMethod.invoke(a);</span><br><span class="line">System.out.println(intValue); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h3 id="访问静态私有方法"><a href="#访问静态私有方法" class="headerlink" title="访问静态私有方法"></a>访问静态私有方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Method</span> <span class="variable">staticMethod</span> <span class="operator">=</span> A.class.getDeclaredMethod(<span class="string">&quot;of&quot;</span>, <span class="type">int</span>.class); <span class="comment">// 第一个是方法名，第二个是函数参数的类型</span></span><br><span class="line">staticMethod.setAccessible(<span class="literal">true</span>); <span class="comment">// 关键！</span></span><br><span class="line"><span class="type">A</span> <span class="variable">newA</span> <span class="operator">=</span> (A) staticMethod.invoke(<span class="literal">null</span>, <span class="string">&quot;A&quot;</span>); <span class="comment">// 对于静态方法，第一个参数可以传任意类型的任意值</span></span><br><span class="line">System.out.println(newA);</span><br></pre></td></tr></table></figure><h2 id="Java集合"><a href="#Java集合" class="headerlink" title="Java集合"></a>Java集合</h2><blockquote><p>2023-01-16</p></blockquote><h3 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h3><ul><li>先进先出</li></ul><h4 id="单线程实现"><a href="#单线程实现" class="headerlink" title="单线程实现"></a>单线程实现</h4><ul><li><code>LinkedList</code></li><li><code>PriorityQueue</code></li></ul><h4 id="多线程实现"><a href="#多线程实现" class="headerlink" title="多线程实现"></a>多线程实现</h4><ul><li><code>BlockingQueue</code>接口<ul><li><code>ArrayBlockingQueue</code></li><li><code>LinkedBlockingQueue</code></li></ul></li></ul><h3 id="Deque"><a href="#Deque" class="headerlink" title="Deque"></a>Deque</h3><ul><li>双端队列</li><li>包括<code>Queue</code>、<code>Stack</code>等接口</li></ul><h4 id="单线程实现-1"><a href="#单线程实现-1" class="headerlink" title="单线程实现"></a>单线程实现</h4><ul><li><code>ArrayDeque</code>：循环数组实现</li><li><code>LinkedList</code></li></ul><h4 id="多线程实现-1"><a href="#多线程实现-1" class="headerlink" title="多线程实现"></a>多线程实现</h4><ul><li><code>BlockingDeque</code>接口<ul><li>只有<code>LinkedBlockingDeque</code></li></ul></li><li><code>ConcurrentLinkedDeque</code></li></ul><h3 id="SortedMap-NavigableMap"><a href="#SortedMap-NavigableMap" class="headerlink" title="SortedMap &#x2F; NavigableMap"></a>SortedMap &#x2F; NavigableMap</h3><p>排序Map &#x2F; 可导航Map</p><h4 id="单线程实现-2"><a href="#单线程实现-2" class="headerlink" title="单线程实现"></a>单线程实现</h4><ul><li><code>TreeMap</code>：红黑树实现</li></ul><h4 id="多线程实现-2"><a href="#多线程实现-2" class="headerlink" title="多线程实现"></a>多线程实现</h4><ul><li><code>ConcurrentSkipListMap</code></li></ul><h3 id="SortedSet-NavigableSet"><a href="#SortedSet-NavigableSet" class="headerlink" title="SortedSet &#x2F; NavigableSet"></a>SortedSet &#x2F; NavigableSet</h3><p>基于 SortedMap &#x2F; NavigableMap</p><h2 id="ArrayList和LinkedList的原理和使用场景"><a href="#ArrayList和LinkedList的原理和使用场景" class="headerlink" title="ArrayList和LinkedList的原理和使用场景"></a>ArrayList和LinkedList的原理和使用场景</h2><blockquote><p>2023-02-23</p></blockquote><h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><ul><li>默认大小为<code>10</code>，每次扩大为<code>1.5</code>倍</li><li>数组扩容时需要复制旧数组内容到新数组</li><li>预分配内存，效率高</li><li>适合绝大多数场景（顺序添加、遍历、随机访问等）。当你需要一个<code>List</code>时，就选它</li></ul><h3 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h3><ul><li>每个节点对应一个<code>Node</code>对象，保存前后指针，增加了内存占用</li><li>查找指定位置时会先计算与头部和尾部的距离，哪个近就从哪里开始遍历（双向链表）</li><li>实现了<code>Deque</code>接口，当你需要<strong>双向队列</strong>或<strong>经常变动头部节点</strong>时，就选它</li></ul><h3 id="实现和复杂度对比"><a href="#实现和复杂度对比" class="headerlink" title="实现和复杂度对比"></a>实现和复杂度对比</h3><table><thead><tr><th>类型</th><th>ArrayList</th><th>LinkedList</th></tr></thead><tbody><tr><td>实现方式</td><td>动态数组</td><td>双向链表</td></tr><tr><td>内存分步</td><td><strong>连续</strong></td><td>不连续</td></tr><tr><td>查询效率</td><td><em>O(n)</em></td><td><em>O(n)</em></td></tr><tr><td>随机访问效率</td><td>***O(1)***，下标访问</td><td>*O(n)*，遍历至指定位置</td></tr><tr><td>随机增加&#x2F;删除效率</td><td>*O(n)*，需移动数组，但很快</td><td>*O(n)*，遍历找到节点</td></tr><tr><td>头部添加删除效率</td><td>*O(n)*，需移动后续数组</td><td><em><strong>O(1)</strong></em></td></tr><tr><td>尾部添加删除效率</td><td>*O(1)*，添加时可能需要扩容数组</td><td><em><strong>O(1)</strong></em></td></tr></tbody></table><h2 id="数字的大小比较"><a href="#数字的大小比较" class="headerlink" title="数字的大小比较"></a>数字的大小比较</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span> <span class="number">1.00f</span> == <span class="number">1.000f</span>;</span><br><span class="line"><span class="keyword">assert</span> <span class="number">1.00d</span> == <span class="number">1.000f</span>;</span><br><span class="line"><span class="keyword">assert</span> <span class="number">1.00d</span> == <span class="number">1.000d</span>;</span><br><span class="line"><span class="keyword">assert</span> <span class="keyword">new</span> <span class="title class_">Float</span>(<span class="string">&quot;1.00&quot;</span>).equals(<span class="keyword">new</span> <span class="title class_">Float</span>(<span class="string">&quot;1.000&quot;</span>));</span><br><span class="line"><span class="keyword">assert</span> <span class="keyword">new</span> <span class="title class_">Double</span>(<span class="string">&quot;1.00&quot;</span>).equals(<span class="keyword">new</span> <span class="title class_">Double</span>(<span class="string">&quot;1.000&quot;</span>));</span><br><span class="line"><span class="keyword">assert</span> !<span class="keyword">new</span> <span class="title class_">Double</span>(<span class="string">&quot;1.00&quot;</span>).equals(<span class="keyword">new</span> <span class="title class_">Float</span>(<span class="string">&quot;1.00&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;1.00&quot;</span>).equals(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;1.00&quot;</span>));</span><br><span class="line"><span class="keyword">assert</span> !<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;1.00&quot;</span>).equals(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;1.000&quot;</span>)); <span class="comment">// 比较精度</span></span><br><span class="line"><span class="keyword">assert</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;1.00&quot;</span>).compareTo(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;1.000&quot;</span>)) == <span class="number">0</span>; <span class="comment">// 不比较精度</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0&quot;</span>).signum() == <span class="number">0</span>;</span><br><span class="line"><span class="keyword">assert</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.00&quot;</span>).signum() == <span class="number">0</span>;</span><br><span class="line"><span class="keyword">assert</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;-0.00&quot;</span>).signum() == <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> String.valueOf(Double.POSITIVE_INFINITY).equals(<span class="string">&quot;Infinity&quot;</span>);</span><br><span class="line"><span class="keyword">assert</span> String.valueOf(Double.NEGATIVE_INFINITY).equals(<span class="string">&quot;-Infinity&quot;</span>);</span><br><span class="line"><span class="keyword">assert</span> Double.parseDouble(<span class="string">&quot;Infinity&quot;</span>) == Double.POSITIVE_INFINITY;</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> String.valueOf(Double.POSITIVE_INFINITY - Double.POSITIVE_INFINITY).equals(<span class="string">&quot;NaN&quot;</span>);</span><br><span class="line"><span class="keyword">assert</span> Double.parseDouble(<span class="string">&quot;NaN&quot;</span>) != Double.POSITIVE_INFINITY - Double.POSITIVE_INFINITY;</span><br><span class="line"><span class="keyword">assert</span> Double.valueOf(<span class="string">&quot;NaN&quot;</span>).equals(Double.POSITIVE_INFINITY - Double.POSITIVE_INFINITY);</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> <span class="number">0.0d</span> != Double.POSITIVE_INFINITY - Double.POSITIVE_INFINITY;</span><br><span class="line"><span class="keyword">assert</span> !Double.valueOf(<span class="number">0.0d</span>).equals(Double.POSITIVE_INFINITY - Double.POSITIVE_INFINITY);</span><br></pre></td></tr></table></figure><div style="border-top:2px solid #eee;height:1px;margin:8px 0"></div><div class="article-category"><svg class="i-tag" width="16px" height="16px" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.41959 3.23866C6.23018 3.05852 7.19557 3 8.312 3H9.92963C10.9327 3 11.8694 3.5013 12.4258 4.3359L13.2383 5.5547C13.4238 5.83288 13.736 6 14.0704 6H19.1258C20.7233 6 22.0181 7.26115 22.0029 8.8852C21.9847 10.8192 22 12.7539 22 14.688C22 15.8044 21.9415 16.7698 21.7613 17.5804C21.5787 18.4024 21.2579 19.1251 20.6915 19.6915C20.1251 20.2579 19.4024 20.5787 18.5804 20.7613C17.7698 20.9415 16.8044 21 15.688 21H8.312C7.19557 21 6.23018 20.9415 5.41959 20.7613C4.59764 20.5787 3.87488 20.2579 3.30848 19.6915C2.74209 19.1251 2.42133 18.4024 2.23866 17.5804C2.05852 16.7698 2 15.8044 2 14.688V9.312C2 8.19557 2.05852 7.23018 2.23866 6.41959C2.42133 5.59764 2.74209 4.87488 3.30848 4.30848C3.87488 3.74209 4.59764 3.42133 5.41959 3.23866ZM8.19103 13.8535C8.05868 14.449 8 15.2412 8 16.312V18C8 18.5523 7.55228 19 7 19C6.44772 19 6 18.5523 6 18V16.312C6 15.1956 6.05852 14.2302 6.23866 13.4196C6.42133 12.5976 6.74209 11.8749 7.30848 11.3085C7.87488 10.7421 8.59764 10.4213 9.41959 10.2387C10.2302 10.0585 11.1956 10 12.312 10H17.688H19C19.5523 10 20 10.4477 20 11C20 11.5523 19.5523 12 19 12H17.688H12.312C11.2412 12 10.449 12.0587 9.85349 12.191C9.26933 12.3209 8.9375 12.5079 8.72269 12.7227C8.50789 12.9375 8.32085 13.2693 8.19103 13.8535Z"/></svg> &nbsp; <a class="article-category-link" href="/category/technology/">技术</a>&nbsp;/&nbsp;<a class="article-category-link" href="/category/technology/java/">Java</a></div><div class="article-date"><time datetime="2018-09-18T06:00:00.000Z" itemprop="datePublished">2018-09-18</time></div></article></body></html>